# effect for navigating to the next event from the first hub event
select_first_meet_affairs_effect = {
	# first time 
	# TODO randomly choose from list
	trigger_event = LIDAf.1
}

# effect for navigating to a random initial event
select_start_affairs_effect = {
	# TODO randomly choose from list
	trigger_event = LIDAs.1
}

# expects character scope with a scope:affairs_partner character
# effects for progressing a sex event
calculate_dom_success_effect = {
	save_scope_value_as = {
		name = dom_chance
		value = {
			add = dom_base_success_value
			# physically stronger / more robust
			if = {
				limit = {
					has_trait = strong
				}
				add = 15
			}
			if = {
				limit = {
					scope:affairs_partner = {
						has_trait = strong
					}
				}
				add = -15
			}
			if = {
				limit = {
					has_trait = physique_good_1
				}
				add = 10
			}
			if = {
				limit = {
					has_trait = physique_good_2
				}
				add = 20
			}
			if = {
				limit = {
					has_trait = physique_good_3
				}
				add = 30
			}
			if = {
				limit = {
					scope:affairs_partner = {
						has_trait = physique_good_1
					}
				}
				add = -10
			}
			if = {
				limit = {
					scope:affairs_partner = {
						has_trait = physique_good_2
					}
				}
				add = -20
			}
			if = {
				limit = {
					scope:affairs_partner = {
						has_trait = physique_good_3
					}
				}
				add = -30
			}
			# if lustful, then success decrease if the partner is hot
			if = {
				limit = {
					has_trait = lustful
					scope:affairs_partner = {
						has_trait = beauty_good_1
					}
				}
				add = -5
			}
			else_if = {
				limit = {
					has_trait = lustful
					scope:affairs_partner = {
						has_trait = beauty_good_2
					}
				}
				add = -10
			}
			else_if = {
				limit = {
					has_trait = lustful
					scope:affairs_partner = {
						has_trait = beauty_good_3
					}
				}
				add = -15
			}
			if = {
				limit = {
					has_trait = beauty_good
					scope:affairs_partner = {
						has_trait = lustful
					}
				}
				add = 5
			}
			else_if = {
				limit = {
					has_trait = beauty_good_2
					scope:affairs_partner = {
						has_trait = lustful
					}
				}
				add = 10
			}
			else_if = {
				limit = {
					has_trait = beauty_good_3
					scope:affairs_partner = {
						has_trait = lustful
					}
				}
				add = 15
			}
			# every rank difference has preconceived differences in power (higher rank easier to dom lower rank, 10% per rank)
			if = {
				limit = {
					tier_difference = {
						target = scope:affairs_partner
						value = 1
					}
				}
				add = 5
			}
			else_if = {
				limit = {
					tier_difference = {
						target = scope:affairs_partner
						value = 2
					}
				}
				add = 10
			}
			else_if = {
				limit = {
					tier_difference = {
						target = scope:affairs_partner
						value = 3
					}
				}
				add = 15
			}
			else_if = {
				limit = {
					tier_difference = {
						target = scope:affairs_partner
						value = 4
					}
				}
				add = 20
			}
			else_if = {
				limit = {
					tier_difference = {
						target = scope:affairs_partner
						value >= 5
					}
				}
				add = 25
			}
			else_if = {
				limit = {
					tier_difference = {
						target = scope:affairs_partner
						value = -1
					}
				}
				add = -5
			}
			else_if = {
				limit = {
					tier_difference = {
						target = scope:affairs_partner
						value = -2
					}
				}
				add = -10
			}
			else_if = {
				limit = {
					tier_difference = {
						target = scope:affairs_partner
						value = -3
					}
				}
				add = -15
			}
			else_if = {
				limit = {
					tier_difference = {
						target = scope:affairs_partner
						value = -4
					}
				}
				add = -20
			}
			else_if = {
				limit = {
					tier_difference = {
						target = scope:affairs_partner
						value <= -5
					}
				}
				add = -25
			}
			# stubborn characters dom more easily 
			if = {
				limit = {
					has_trait = stubborn
				}
				add = 10
			}
			if = {
				limit = {
					scope:affairs_partner = {
						has_trait = stubborn
					}
				}
				add = -10
			}
			# existing sub/dom opinion contributes to dom
			if = {
				limit = {
					reverse_has_opinion_modifier = {
						target = scope:affairs_partner
						modifier = dominant_opinion
						value >= 10
					}
				}
				add = 10
			}
			if = {
				limit = {
					reverse_has_opinion_modifier = {
						target = scope:affairs_partner
						modifier = dominant_opinion
						value >= 20
					}
				}
				add = 10
			}
			if = {
				limit = {
					reverse_has_opinion_modifier = {
						target = scope:affairs_partner
						modifier = dominant_opinion
						value <= -10
					}
				}
				add = -10
			}
			if = {
				limit = {
					reverse_has_opinion_modifier = {
						target = scope:affairs_partner
						modifier = dominant_opinion
						value <= -20
					}
				}
				add = -20
			}

			min = 5
			max = 95
		}
	}

	random = {
		chance = scope:dom_chance

		save_scope_value_as = {
			name = dom_success
			value = yes
		}
	}
}